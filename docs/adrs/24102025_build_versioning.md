# Версионирование артефактов сборки

## Проблема

Из кода в запущенном приложении требуется получать версию сборки/API. Отдавать её фронту, писать в логи и т.п.

## Решение

1. Единой точкой установки версии при сборке на окружении является Jenkins.
2. Конвенция версии для непрода: `<последний тег>-<имя ветки>-<номер сборки в jenkins>-<короткий хэш коммита>`
3. Конвенция версии для прода (master): `<последний тег`
4. Пайплайн прописывает версию в метаданные физических сборок (для C# через флаг version команды dotnet build )

Дата принятия решения: 24.10.2025

Плюсы: 
- Нет коммитов в репозиторий из пайплана. Чистый репозиторий

Минусы:
- версия вне окружения всегда 0.0.0.


## Альтренативаные варианты

### Пайплайн при сборке проставляет версию в файле и коммитит в репозиторий. Например в Build.props
Плюсы: 
- вне окружения можно понять какая сейчас версия АПИ и отдавать её
Минусы: 
- локальная версия может уже отличаться, например уже появился новый несобранный функционал
- коммиты версий из пайплайна. Засорение репозитория
- конфликты версий в файле в репозитории при сборке в параллельных ветках


## Решение обсуждали и принимали

Моргунов Никита (BE)<br>
Говоров Виктор (BE)<br>
Никитин Максим (DevOps)<br>
Светлана Сукина (BE)<br>
Денис Батурин (QA)<br>